{% extends "base/base.html" %}

{% block content %}

{% load static %}

<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="{% static 'css/fazer_solicitacao.css' %}">
</head>

  <body>
    <div class="centered-div">
        <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="registration-form">
                <div class="titulo">
                    <br> <h1> &zwnj; Solicitação de {{solicitacao.usuario.nome}} {{solicitacao.usuario.sobrenome}} &zwnj; </h1> <br> <br> <br>
                </div>
<<<<<<< HEAD
<<<<<<< Updated upstream
=======
                <form method="post" enctype="multipart/form-data" action="{% url 'fazer_solicitacao' %}"> {% csrf_token %}
>>>>>>> Stashed changes
=======
>>>>>>> 2a657132b73addc3c75cc1008b9a3a4f1b290c65
                    <div>
                        <h4> &zwnj; Respostas do Formulário &zwnj; </h4> <br> <br>
                    </div>
                    <div class="form-group">
                        <label for="questao1">Qual é o seu objetivo ao fazer esse pedido?</label>
                        <p> {{ solicitacao.questao1 }}</p>
                    </div>
                    <div class="form-group">
                        <label for="questao2">Você já realizou algum pedido de peruca anteriomente?</label>
                        <p> {{ solicitacao.questao2 }}</p>
                    </div>
                    <div class="form-group">
                        <label for="questao3">Qual o tipo de câncer que voce está passando no momento?</label>
                        <p> {{ solicitacao.questao3 }}</p>
                    </div>
                    <div class="form-group">
                        <strong>Foto do comprovante de quimioterapia:</strong> <br> <br>
                        <div class="peruca-item">
                            <img src="{{ solicitacao.comprovante.url }}" alt="Comprovante">
                        </div>
                    </div>
<<<<<<< HEAD
<<<<<<< Updated upstream
                    {% if solicitacao.peruca %}
                    <div>
                        <br> <h4> &zwnj; Peruca escolhida &zwnj; </h4> <br> <br>
=======
                    <div>
                        <br> <h4> &zwnj; Perucas &zwnj; </h4> <br> <br>
                        <p> Escolha, dentre as perucas abaixo, aquela que você achar que combine mais com você! </p>
>>>>>>> Stashed changes
=======
                    {% if solicitacao.peruca %}
                    <div>
                        <br> <h4> &zwnj; Peruca escolhida &zwnj; </h4> <br> <br>
>>>>>>> 2a657132b73addc3c75cc1008b9a3a4f1b290c65
                    </div>
                    <div class="perucas-container">
                          <div class="peruca-item">
                            <img src="{{ solicitacao.peruca.foto.url }}" alt="Peruca">
                          </div>
                      </div>
<<<<<<< HEAD
<<<<<<< Updated upstream
                    {% endif %}
                    <div>
                        <br> <h4> &zwnj; Endereço &zwnj; </h4> <br> <br>
                    </div>
                    <div class="form-group">
                      <label for="rua">Rua</label>
                      <p> {{ request.user.rua }} </p>
                    </div>
                    <div class="form-group">
                      <label for="numero">Número</label>
                      <p> {{ request.user.numero }} </p>
                    </div>
                    <div class="form-group">
                        <label for="bairro">Bairro</label>
                        <p> {{ request.user.bairro }} </p>
                      </div>
                    <div class="form-group">
                      <label for="cidade">Cidade</label>
                      <p> {{ request.user.cidade }} </p>
                    </div>
                    <div class="form-group">
                        <label for="estado">Estado</label>
                        <p> {{ request.user.estado }} </p>
                      </div>
                    <br>

                    <div>
                      <h4> &zwnj; Pedido {{ solicitacao.get_status_display }} &zwnj; </h4> <br> <br>
                    </div>
                <div class="form-group">
                      {% if request.user.is_staff %}
                      {% if solicitacao.status == 'analise'%}
                        <div class="d-flex justify-content-start">
                          <form action="{% url 'aprovar_solicitacao' solicitacao.id %}" method="POST">
                              {% csrf_token %}
                              <input type="submit" class="btn btn-success me-2" value="Aprovar">
                          </form>
                          <form action="{% url 'rejeitar_solicitacao' solicitacao.id %}" method="POST">
                              {% csrf_token %}
                              <input type="submit" class="btn btn-danger" value="Rejeitar">
                          </form>
                        </div>
                      {% elif solicitacao.status == 'aprovado'%}
                        <form action="{% url 'addCR' solicitacao.id %}" method="POST">
                            {% csrf_token %}
                            <label for="id_codRastreio">Código de Rastreio:</label>
                            <input type="text" id="id_codRastreio" name="codRastreio">
                            <br>
                            <br>
                            <input type="submit" class="btn btn-primary btn-block" value="Adicionar Código de Rastreio">
                        </form>
                      {% endif %}
                  {% endif %}
                  {% if solicitacao.status == 'caminho' %}
                    <p>Código de Rastreio: {{ solicitacao.codRastreio }}</p>
                    {% if solicitacao.usuario == request.user%}
                        <form action="{% url 'finalizar_entrega' solicitacao.id %}" method="POST">
                            {% csrf_token %}
                            <label> Já recebeu a sua encomenda? </label>
                            <input type="submit" class="btn btn-primary btn-block" value="Finalizar Entrega">
                        </form>
                    {% endif %}
                  {% endif %}
                </div>
=======
=======
                    {% endif %}
>>>>>>> 2a657132b73addc3c75cc1008b9a3a4f1b290c65
                    <div>
                        <br> <h4> &zwnj; Endereço &zwnj; </h4> <br> <br>
                    </div>
                    <div class="form-group">
                      <label for="rua">Rua</label>
                      <p> {{ request.user.rua }} </p>
                    </div>
                    <div class="form-group">
                      <label for="numero">Número</label>
                      <p> {{ request.user.numero }} </p>
                    </div>
                    <div class="form-group">
                        <label for="bairro">Bairro</label>
                        <p> {{ request.user.bairro }} </p>
                      </div>
                    <div class="form-group">
                      <label for="cidade">Cidade</label>
                      <p> {{ request.user.cidade }} </p>
                    </div>
                    <div class="form-group">
                        <label for="estado">Estado</label>
                        <p> {{ request.user.estado }} </p>
                      </div>
                    <br>

                    <div>
                      <h4> &zwnj; Pedido {{ solicitacao.get_status_display }} &zwnj; </h4> <br> <br>
                    </div>
<<<<<<< HEAD
                </form>
>>>>>>> Stashed changes
=======
                <div class="form-group">
                      {% if request.user.is_staff %}
                      {% if solicitacao.status == 'analise'%}
                        <div class="d-flex justify-content-start">
                          <form action="{% url 'aprovar_solicitacao' solicitacao.id %}" method="POST">
                              {% csrf_token %}
                              <input type="submit" class="btn btn-success me-2" value="Aprovar">
                          </form>
                          <form action="{% url 'rejeitar_solicitacao' solicitacao.id %}" method="POST">
                              {% csrf_token %}
                              <input type="submit" class="btn btn-danger" value="Rejeitar">
                          </form>
                        </div>
                      {% elif solicitacao.status == 'aprovado'%}
                        <form action="{% url 'addCR' solicitacao.id %}" method="POST">
                            {% csrf_token %}
                            <label for="id_codRastreio">Código de Rastreio:</label>
                            <input type="text" id="id_codRastreio" name="codRastreio">
                            <br>
                            <br>
                            <input type="submit" class="btn btn-primary btn-block" value="Adicionar Código de Rastreio">
                        </form>
                      {% endif %}
                  {% endif %}
                  {% if solicitacao.status == 'caminho' %}
                    <p>Código de Rastreio: {{ solicitacao.codRastreio }}</p>
                    {% if solicitacao.usuario == request.user%}
                        <form action="{% url 'finalizar_entrega' solicitacao.id %}" method="POST">
                            {% csrf_token %}
                            <label> Já recebeu a sua encomenda? </label>
                            <input type="submit" class="btn btn-primary btn-block" value="Finalizar Entrega">
                        </form>
                    {% endif %}
                  {% endif %}
                </div>
>>>>>>> 2a657132b73addc3c75cc1008b9a3a4f1b290c65
            </div>
        </div>
        </div>
        </div>
    </div>
    </body>
{% endblock %}